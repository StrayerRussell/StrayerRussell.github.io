<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" type="text/css">
  </head>
  <body>
    <table class="fullheight" cellpadding="0" cellspacing="0" width="100%">
        <!--Header-->
        <tr>
            <td class="corner"></td>
            <td class="title"><h1>Coldline Cisco IOS Port</h1></td>
        </tr>
        <!--Body-->
        <tr class="fullheight">
            <!--Nav Bar-->
            <td class="navCont">
                <div id="navBar">
                    <ul class="nav">
                        <li class="current"><a href="index.html">Home</a></li>
                        <li>
                            <p>Projects</p>
                            <ul>
                                <li><a href="all.html">All</a></li>
                                <li><a href="software.html">Software</a></li>
                                <li><a href="hardware.html">Hardware</a></li>
                            </ul>
                        </li>
                        <li><a href="resume.pdf">Resume</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                    <div id="soc">
                        <center>
                            <div>
                                <a class="icon" href="https://github.com/StrayerRussell"><img class="icon" src="./images/githubIcon.svg" title="GitHub"></a>
                                <a class="icon" href="https://linkedin.com/in/david-strayer-russell"><img class="icon" src="./images/linkedinIcon.svg" title="LinkedIn"></a>
                                <a class="icon" href="mailto:david.strayer.russell@gmail.com"><img class="icon" src="./images/emailIcon.svg" title="E-Mail"></a>
                            </div>
                        </center>
                    </div>
                    <div id="qr">
                        <p>Direct Page Link</p>
                        <center><div id="qrcode"></div></center>
                    </div>
                    <ul class="nav" id="color">
                        <p>Terminal Accent Color</p>
                        <li class="theme" id="amber" onclick="setTheme('#FFB000');">Amber</li>
                        <li class="theme" id="green" onclick="setTheme('#33FF33')">Green</li>
                        <li class="theme" id="white" onclick="setTheme('#FFFFFF')">White</li>
                        <li class="theme" id="purple" onclick="setTheme('#9500F2')">Purple</li>
                    </ul>
                </div>
            </td>
            <!--Main Body Section-->
            <td class="main fullheight" style="vertical-align: top;" width="100%">
                <div class="article">
                    <a href="https://papercookies.itch.io/coldline">Link to store page</a>
                    <img src="./images/coldlineArticleArt.png" alt="red phone sitting in front of world map">
                    <h3>Overview</h3>
                    <p>This is the story of porting the indie game <a href="https://papercookies.itch.io/coldline">Coldline</a> created by Adam Pype(game) and Victor Kraus(sound)
                    from the Unity game engine to a realtime, event driven, TCL Interactive Voice Applicaiton within cisco IOS so that the game (which is based upon successfull
                    navigation of a phone tree) can be played on an honest to goodness actual factual plain old landline telephone (touchtones required unfortunatley, rotary does not work)</p>
                    <h3>Backstory</h3>
		                <p>I am (or was at the time) a member of the "Media Archeology Lab" at UT Dallas which is a research orginisation dedicated to collecting and maintaining old(er) technology and providing hands on oppurtunities. One of our lab mentors discovered the game Coldline from an article on Hackaday and, seeing as how the premise centered arround navigating of a telephone tree, made the suggestion that we get permission to port the game to an interactive voice application so that it could be played on the telephones within our lab. We were then able to reach out (through this lab mentor) and get permission from Mr.Pype (pronounced py-pah) to port the game with the limitations that we not distribute the source code or share our final port.</p>
                    <h3>Reverse Engineering</h3>
		                <p>To begin the process of porting we had to reverse engineer the flow of the game. All of the actual game logic would have to be rewritten as Unity and Cisco IOS have <b>NO</b> overlap whatsoever and the source code did not come with a map of which menus connect to which. Creating the flow chart was fairly uneventful, although our lab mentor did introduce us to the D2 markdown flowchart language (which is amazing). The process of diagramming took about two weeks, most of which was validity checking ensuring that the connections between menus were valid and had the correct digits assigned to the right transition (ensure digit 1 actually connects to option one and that 0 returns the user to the main menu)</p>
                    <h3>The Process of Porting</h3>
		                <p>After the creation of the flowchart it was time to begin the task of porting the game logic. This was a fairly involved undertaking as it was so different than anything I had ever done before. The scripting for Cisco IOS interactive voice applications (IVR) is done in a heavily modified version of TCL (tool command language) which requires manual and explicit definition of a state machine with hard realtime callback functions. The programmer must also take great care to avoid blocking logic as the intended application flow is for the CPU to setup some other hardware (DSP, Digit Reciever, etc) and then go off to process something else, recieving an interrupt when the hardware has finished (Audio prompt has completed playback, user has entered a digit, etc). If blocking logic occurs the application monopolizes the CPU and no other functions (Including debugging or termination of application) can be preformed until the blocking logic ceases.</p>
                    <h3>Difficulties</h3>
                        <p>The primary difficulty of porting Coldline to an IVR (aside from wrapping my head around an event driven state machine) is that a game is fundamentally different from the intended use case. The primary instance of this is that all of the Cisco documentation assumes that eventually the incoming call leg will be connected to some other leg in order to "complete" the call setup (connecting one phone to another). Within a game this does not happen, the call effectivley never exits setup and is then terminated without "going" anywhere. This means that there is no real documentation for using
                        the scripting in the method that this project does, we had to figure most things out for ourselves.
                        </p>
                    <h3>Conclusion</h3>
                        <p>This was a super fun project to do. Having to learn an entirley different programming mindset (hard-realtime event-driven state machine callbacks) for the purpose of misusing enterprise networking hardware to play an indie game, not only did it give me an amazing story, but it also taught me far more than I imagined it would. Understanding the logic of using a state machine has helped me out in planning and implementing other projects.</p>
                </div>
            </td>
        </tr>
        <!--Footer-->
        <tr><td class="footer" colspan="2" height="48"><h5>Strayer Russell 2025</h5></td></tr>
    </table>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="script.js"></script>
    <script>document.onload = onLoad();</script>
  </body>
</html>
