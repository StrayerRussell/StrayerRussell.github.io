<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" type="text/css">
  </head>
  <body>
    <table class="fullheight" cellpadding="0" cellspacing="0" width="100%">
        <!--Header-->
        <tr>
            <td class="corner"></td>
            <td class="title"><h1>ESP32-S3 Composite Video Library</h1></td>
        </tr>
        <!--Body-->
        <tr class="fullheight">
            <!--Nav Bar-->
            <td class="navCont">
                <div id="navBar">
                    <ul class="nav">
                        <li class="current"><a href="index.html">Home</a></li>
                        <li>
                            <p>Projects</p>
                            <ul>
                                <li><a href="all.html">All</a></li>
                                <li><a href="software.html">Software</a></li>
                                <li><a href="hardware.html">Hardware</a></li>
                            </ul>
                        </li>
                        <li><a href="resume.pdf">Resume</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                    <div id="soc">
                        <center>
                            <div>
                                <a class="icon" href="https://github.com/StrayerRussell"><img class="icon" src="./images/githubIcon.svg" title="GitHub"></a>
                                <a class="icon" href="https://linkedin.com/in/david-strayer-russell"><img class="icon" src="./images/linkedinIcon.svg" title="LinkedIn"></a>
                                <a class="icon" href="mailto:david.strayer.russell@gmail.com"><img class="icon" src="./images/emailIcon.svg" title="E-Mail"></a>
                            </div>
                        </center>
                    </div>
                    <div id="qr">
                        <p>Direct Page Link</p>
                        <center><div id="qrcode"></div></center>
                    </div>
                    <ul class="nav" id="color">
                        <p>Terminal Accent Color</p>
                        <li class="theme" id="amber" onclick="setTheme('#FFB000');">Amber</li>
                        <li class="theme" id="green" onclick="setTheme('#33FF33')">Green</li>
                        <li class="theme" id="white" onclick="setTheme('#FFFFFF')">White</li>
                        <li class="theme" id="purple" onclick="setTheme('#9500F2')">Purple</li>
                    </ul>
                </div>
            </td>
            <!--Main Body Section-->
            <td class="main fullheight" style="vertical-align: top;" width="100%">
                <div class="article">
                    <a href="https://github.com/StrayerRussell/ESP32-S3-Analog-Video-Library.git">Github Repo Link</a>
                    <img src="./images/cvbsArticleArt.png">
                    <h3>Overview</h3>
                        <p>This is an overview of the analog video library I made for the ESP32-S3. This is heavily based upon the work of <a href="bitluni.com">Bitluni</a> who made the <a href="">ESP32-S3 VGA Library</a>. In short I have reused their custom LCD driver with circular buffers, and page flipping but modified the sync logic to support composite video; as well as adding several image drawing functions which allow much more efficent access when writing to the framebuffer. Currently the library only supports monochrome NTSC video, I am currently working on color and PAL support and plan on backporting VGA support into a unified library, but would like to gain a better understanding of memory access limitations on the ESP32-S3 so that I can optimize the core functionality before adding extraneous features</p>
                    <h3>Reasons for Creation</h3>
                        <p>The original ESP32 had a number of composite video libraries <a href="">(one made by Bitluni)</a> which are convinient for connecting the ESP32 to a wide variety of displays, from televisions, to microdisplays, and cheap backup camera screens. The ESP32-S3 underwent signifigant design changes such as the addition of USB device-host functionality, multiple DMA channels and much faster external PSRAM which are very useful for many projects, however the LCD peripheral used for the analog video on the original ESP32 was also redesigned, rendering the original libraries non-functional.</p>
                    <h3>Initial Implementation and Sync</h3>
                        <p></p>
                    <h3>Improved Drawing Functions</h3>
                    <h3>Image Types</h3>
                        <p>There are two types of image types that this library provides drawing functions for.</p>
                        <ol>
                            <li>
                                <h4>Monochrome</h4>
                                <p>8-bit monochrome image. Most normal of the three, primarily intended for use with other image drawing libraries such as <a href="https://github.com/bitbank2/JPEGDEC">JPEGDEC</a> or <a href="https://github.com/bitbank2/PNGdec">PNGdec</a></p>
                            </li>
                            <li>
                                <h4>PBM</h4>
                                <p>One-bit per pixel bitonal image. Based upon the "Portable Bitmap" filetype, primarily intended for images with high resolution and contrast within a reasonable size. (used with two of my other projects <a href="webgl2.html">Webgl2 Dithering</a> and <a href="webgpu.html">WebGPU Dithering</a>)</p>
                            </li>
                        </ol>
                        <p>These functions speed up drawing to the framebuffer immenseley as they minimize bounds checks and pointer lookup.</p>
                    <h3>Color</h3>
                    <p>Color encoding on NTSC requires keeping track of the color carrier and manipulating the phase and amplitude of the sine wave overlaid on the monochrome video signal. This is fairly computationally intense and requires a decent DAC to render. Unfortunatley at this time I have not been able to make a resistor DAC with decent enough linearity to test color generation accuratley.</p>
                </div>
            </td>
        </tr>
        <!--Footer-->
        <tr><td class="footer" colspan="2" height="48"><h5>Strayer Russell 2025</h5></td></tr>
    </table>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="script.js"></script>
    <script>document.onload = onLoad();</script>
  </body>
</html>
